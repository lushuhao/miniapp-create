"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var r=0,n=new Array(e.length);r<e.length;r++)n[r]=e[r];return n}}function _toArray(e){return _arrayWithHoles(e)||_iterableToArray(e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}var program=require("commander"),fs=require("fs"),path=require("path"),colors=require("ansi-colors"),log=require("fancy-log"),_require=require("../package.json"),name=_require.name,bin=_require.bin,version=_require.version,bins=Object.keys(bin).join(" | ");function createFile(){var e,r=_toArray(program.args),n=r[0],t=r.slice(1),o="./".concat(n,"/"),a=t[0],i=path.basename(n);!a.length&&a.push(i);var c=a.map(function(e){return createWxFileList(n,e)});extendDir(o),(c=(e=Array.prototype).concat.apply(e,_toConsumableArray(c))).forEach(function(r){".js"===path.extname(r.file)?fs.copyFile(path.resolve(__dirname,r.content),path.resolve(o,r.file),function(e){handleError(e,r)}):fs.writeFile("".concat(o).concat(r.file),r.content,function(e){handleError(e,r)})})}function handleError(e,r){if(e)return log(colors.red("文件创建失败："),r.file),log(colors.red(e));log(colors.green("文件创建成功："),r.file)}function extendDir(e){e&&!fs.existsSync(e)&&e.split("/").reduce(function(e,r){return fs.existsSync(e)||(fs.mkdirSync(e),log(colors.green("创建文件夹："),e)),"".concat(e,"/").concat(r)})}var createWxFileList=function(e,r){var n="",t="",o=/component/i;return log(colors.cyanBright("生成小程序组件？"),colors.red(o.test(e))),o.test(e)?(n="./init/component.js",t='{\n  "component": true\n}'):(n="./init/page.js",t='{\n  "navigationBarTitleText": "'.concat(r,'"\n}')),[{file:"".concat(r,".js"),content:n},{file:"".concat(r,".json"),content:t},{file:"".concat(r,".wxml"),content:'<view class="'.concat(r,'"></view>')},{file:"".concat(r,".wxss"),content:".".concat(r,"{}")}]};program.usage("[command] <options ...>"),program.version(version).option("-v, --version","show ".concat(name," current version")).arguments("<path> [file...]").description("".concat(bins," <path> [file] \n  create one dir to ./path\n  create four files to ./path/file, file.js、file.json、file.wxss、file.wxml")).action(createFile),program.parse(process.argv);